// Copyright 2024 The Jule Programming Language.
// Use of this source code is governed by a BSD 3-Clause
// license that can be found in the LICENSE file.

use std::unsafe
use sys for std::sys

// Exit code of panic calls.
const panicExit = 2

// The built-in panic call.
#export "__jule_panic"
unsafe fn _panic(m: *byte, n: int) {
	out("panic: ")
	outln(unsafe::Str(m, n))
	sys::Exit(panicExit)
}

// Safe wrapper for the [_panic] call.
fn panic(m: str) {
	unsafe { _panic(&m[0], len(m)) }
}