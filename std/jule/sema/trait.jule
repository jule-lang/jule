// Copyright 2023-2024 The Jule Programming Language.
// Use of this source code is governed by a BSD 3-Clause
// license that can be found in the LICENSE file.

use std::jule::lex::{Token, TokenId}

// Trait.
pub struct Trait {
    pub Token:       &Token
    pub Ident:       str
    pub Public:      bool
    pub Mutable:     bool
    pub Methods:     []&Fn
    pub Implemented: []&Struct
}

impl Kind for Trait {
    // Implement: Kind
    // Returns Trait's identifier.
    pub fn Str(self): str {
        ret self.Ident
    }

    // Reports whether types are same.
    pub fn Equals(&self, other: &TypeKind): bool {
        let trt = unsafe { (*(&other)).Trait() }
        ret self == trt
    }
}

impl Trait {
    // Reports whether Trait is built-in.
    pub fn IsBuiltin(self): bool {
        ret self.Token == nil
    }

    // Returns method by identifier.
    // Returns nil if not exist any method in this identifier.
    pub fn FindMethod(mut self, ident: str): &Fn {
        for (_, mut f) in self.Methods {
            if f.Ident == ident {
                ret f
            }
        }
        ret nil
    }
}